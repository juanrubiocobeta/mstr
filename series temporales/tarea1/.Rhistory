geom_density(adjust = 3, color = "purple", linewidth = 1.2, alpha = 0.5)
sp500_plot <- na.omit(sp500_data)
sd_val <- sd(sp500_plot$daily_return)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(adjust = 0.2, color = "orange", linetype = "dotted", linewidth = 1) +
# Variante 2: Muy suave (Mucha anchura, línea gruesa morada)
geom_density(adjust = 3, color = "purple", linewidth = 1.2, alpha = 0.5)
last_plot() +
geom_density(adjust = 0.2, color = "orange", linetype = "dotted", linewidth = 1) +
geom_density(adjust = 3, color = "purple", linewidth = 1, alpha = 0.5)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(adjust = 0.2, color = "orange", linetype = "dotted", linewidth = 1) +
geom_density(adjust = 3, color = "purple", linewidth = 1, alpha = 0.5)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(color = "orange", linetype = "dotted", linewidth = 1) +
geom_density(color = "purple", linewidth = 1, alpha = 0.5)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(color = "orange", linetype = "dotted", linewidth = 1) +
last_plot() +
geom_density(color = "orange", linetype = "dotted", linewidth = 1)
last_plot() +
geom_density(color = "orange", linetype = "dotted", linewidth = 1)
last_plot() +
geom_density(color = "orange", linetype = "dashed", linewidth = 1)
sd_val <- sd(sp500_plot$daily_return)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(color = "orange", linetype = "dashed", linewidth = 1)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(color = "orange", linewidth = 1)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)), bins = 100, fill = "#69b3a2", alpha = 0.6) +
stat_function(fun = dnorm, args = list(mean = 0, sd = sd_val), color = "red", linetype = "dashed") +
coord_cartesian(xlim = c(-0.08, 0.08)) +
theme_minimal()
last_plot() +
geom_density(color = "orange", linewidth = 0.8)
library(ggplot2)
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
stat_function(fun = dnorm,
args = list(mean = 0, sd = 1),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
geom_density(color = "orange",
linewidth = 0.8) +
coord_cartesian(xlim = c(-0.12, -0.02),
ylim = c(0, 8)) +
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
ggplot(sp500_plot, aes(x = daily_return)) +
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
stat_function(fun = dnorm,
args = list(mean = 0, sd = 1),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
geom_density(color = "orange",
linewidth = 0.8) +
coord_cartesian(xlim = c(-0.07, -0.02),
ylim = c(0, 8)) +
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 1. Calculamos estadísticas necesarias para la curva normal teórica
mean_val <- mean(sp500_plot$daily_return, na.rm = TRUE)
sd_val   <- sd(sp500_plot$daily_return, na.rm = TRUE)
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.12, -0.02),
ylim = c(0, 8)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.07, -0.02),
ylim = c(0, 8)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.07, -0.015),
ylim = c(0, 8)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 100,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.07, -0.015),
ylim = c(0, 6)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 1000,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.07, -0.015),
ylim = c(0, 6)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 2. Generamos el gráfico completo
ggplot(sp500_plot, aes(x = daily_return)) +
# Capa 1: Histograma de fondo
geom_histogram(aes(y = after_stat(density)),
bins = 1000,
fill = "#69b3a2",
alpha = 0.6) +
# Capa 2: Distribución Normal Teórica (Roja - La teoría)
stat_function(fun = dnorm,
args = list(mean = mean_val, sd = sd_val),
color = "red",
linetype = "dashed",
linewidth = 0.8) +
# Capa 3: Densidad Kernel (Naranja - La realidad)
geom_density(color = "orange",
linewidth = 0.8) +
# Capa 4: ZOOM en la COLA IZQUIERDA
# xlim: miramos desde -12% hasta -2%
# ylim: cortamos la altura a 8 para que se vean bien las líneas (si no, se ven planas)
coord_cartesian(xlim = c(-0.07, -0.015),
ylim = c(0, 8)) +
# Etiquetas y tema
labs(title = "Zoom en la Cola Izquierda (Pérdidas)",
subtitle = "Comparación: Normal (Roja) vs. Realidad (Naranja)",
x = "Retorno Diario",
y = "Densidad") +
theme_minimal()
# 1. PREPARACIÓN DE DATOS DE LLUVIA (AGREGACIÓN)
# -------------------------------------------------------------------
# Creamos manualmente los datos de Londres 2023 (Serie acumulada)
meses <- c("Ene", "Feb", "Mar", "Abr", "May", "Jun",
"Jul", "Ago", "Sep", "Oct", "Nov", "Dic")
lluvia_mm <- c(52.8, 3.9, 83.1, 49.2, 25.2, 29.9,
70.6, 45.2, 48.5, 94.2, 70.1, 74.4)
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.csv")) {
datos_spy <- read.csv("SPY.csv")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read.csv(file.choose())
}
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.csv")) {
datos_spy <- read.csv("SPY.xlsx")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read.csv(file.choose())
}
if (!require("readxl")) install.packages("readxl")
library(readxl)
# 1. PREPARACIÓN DE DATOS DE LLUVIA (AGREGACIÓN)
# -------------------------------------------------------------------
# Creamos manualmente los datos de Londres 2023 (Serie acumulada)
meses <- c("Ene", "Feb", "Mar", "Abr", "May", "Jun",
"Jul", "Ago", "Sep", "Oct", "Nov", "Dic")
lluvia_mm <- c(52.8, 3.9, 83.1, 49.2, 25.2, 29.9,
70.6, 45.2, 48.5, 94.2, 70.1, 74.4)
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.xlsx")) {
datos_spy <- read.excel("SPY.xlsx")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read.csv(file.choose())
}
setwd("~/mstr/series temporales")
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.xlsx")) {
datos_spy <- read.excel("SPY.xlsx")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read.csv(file.choose())
}
if (!require("readxl")) install.packages("readxl")
library(readxl)
# 1. PREPARACIÓN DE DATOS DE LLUVIA (AGREGACIÓN)
# -------------------------------------------------------------------
# Creamos manualmente los datos de Londres 2023 (Serie acumulada)
meses <- c("Ene", "Feb", "Mar", "Abr", "May", "Jun",
"Jul", "Ago", "Sep", "Oct", "Nov", "Dic")
lluvia_mm <- c(52.8, 3.9, 83.1, 49.2, 25.2, 29.9,
70.6, 45.2, 48.5, 94.2, 70.1, 74.4)
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.xlsx")) {
datos_spy <- read.excel("SPY.xlsx")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read.excel(file.choose())
}
# 2. CARGA DE DATOS SPY (MUESTREO)
# -------------------------------------------------------------------
# Intentamos leer el archivo. Si no está, te pedirá seleccionarlo.
if (file.exists("SPY.xlsx")) {
datos_spy <- read_excel("SPY.xlsx")
} else {
message("No encuentro SPY.csv. Por favor, selecciónalo en la ventana emergente.")
datos_spy <- read_excel(file.choose())
}
# Convertimos la columna fecha a formato Fecha de R (asumiendo formato mes/dia/año)
datos_spy$date <- as.Date(datos_spy$date, format="%m/%d/%Y")
# Nos quedamos con los últimos 365 datos para ver mejor el gráfico
spy_reducido <- tail(datos_spy, 365)
# 3. GENERACIÓN DE GRÁFICOS (Actividades 2 y 3)
# -------------------------------------------------------------------
# Configuramos la pantalla para mostrar 3 gráficos uno encima de otro
par(mfrow=c(3,1), mar=c(4,4,2,2))
# GRÁFICO 1: Muestreo (Actividad 2)
# Serie temporal simple: X_t frente a t
plot(spy_reducido$date, spy_reducido$close,
type = "l",           # 'l' significa líneas
col = "blue",
main = "1. Serie por Muestreo: Precio SPY (Cierre Diario)",
xlab = "Tiempo", ylab = "Precio ($)")
grid() # Añade cuadrícula
# GRÁFICO 2: Agregación (Actividad 2)
# Gráfico de barras para datos acumulados
barplot(lluvia_mm,
names.arg = meses,
col = "forestgreen",
main = "2. Serie por Agregación: Lluvias Mensuales",
ylab = "Precipitación (mm)")
box()  # Pone un marco alrededor
grid(nx=NA, ny=NULL) # Cuadrícula solo horizontal
# GRÁFICO 3: Serie Múltiple (Actividad 3)
# Dibujamos primero el Cierre y luego añadimos la Apertura
plot(spy_reducido$date, spy_reducido$close,
type = "l", col = "blue", lwd = 2,
main = "3. Serie Múltiple: Apertura vs Cierre",
xlab = "Tiempo", ylab = "Valor",
ylim = range(c(spy_reducido$close, spy_reducido$open))) # Ajustar escala
# Añadimos la segunda línea (Apertura)
lines(spy_reducido$date, spy_reducido$open,
col = "orange", lty = 2, lwd = 2) # lty=2 es línea discontinua
# Leyenda
legend("topleft", legend=c("Cierre", "Apertura"),
col=c("blue", "orange"), lty=c(1,2), lwd=2, bg="white")
grid()
# Restaurar configuración de pantalla
par(mfrow=c(1,1))
# 1. INSTALAR LIBRERÍAS NECESARIAS
# -------------------------------------------------------------------
# Instalamos readxl (para leer Excel) y tidyr (por si hay que separar columnas)
if (!require("readxl")) install.packages("readxl")
if (!require("tidyr")) install.packages("tidyr")
library(readxl)
library(tidyr)
# A) Datos de Lluvia (Manuales - Agregación)
meses <- c("Ene", "Feb", "Mar", "Abr", "May", "Jun",
"Jul", "Ago", "Sep", "Oct", "Nov", "Dic")
lluvia_mm <- c(52.8, 3.9, 83.1, 49.2, 25.2, 29.9,
70.6, 45.2, 48.5, 94.2, 70.1, 74.4)
# B) Datos SPY (Muestreo)
# Seleccionar archivo manualmente
if (file.exists("SPY.xlsx")) {
datos_spy <- read_excel("SPY.xlsx")
} else {
message("Selecciona tu archivo SPY.xlsx:")
datos_spy <- read_excel(file.choose())
}
# --- PASO DE SEGURIDAD: SEPARAR COLUMNAS SI ESTÁN PEGADAS ---
# Si R detecta que solo hay 1 columna, asume que está todo junto con comas
if (ncol(datos_spy) == 1) {
message("Detectado formato pegado con comas. Separando columnas...")
# Separamos la columna única en las 6 columnas que me has dicho
datos_spy <- separate(datos_spy, col = 1, sep = ",",
into = c("date", "open", "high", "low", "close", "volume"))
# Al separar, los números se vuelven texto. Los convertimos a números de nuevo.
datos_spy$close <- as.numeric(datos_spy$close)
datos_spy$open  <- as.numeric(datos_spy$open)
}
# Normalizamos nombres a minúsculas
colnames(datos_spy) <- tolower(colnames(datos_spy))
# Arreglar la fecha (Intenta formato Mes/Dia/Año como en tu CSV original)
# Si da error, prueba cambiar "%m/%d/%Y" por "%Y-%m-%d"
datos_spy$date <- as.Date(datos_spy$date, format = "%m/%d/%Y")
# Si tras convertir la fecha sale "NA", probamos el formato automático de Excel
if (all(is.na(datos_spy$date))) {
datos_spy$date <- as.Date(read_excel("SPY.xlsx")[[1]]) # Reintento básico
}
# Filtrar últimos 365 días (quitamos filas vacías si las hay)
datos_spy <- na.omit(datos_spy)
datos_spy <- datos_spy[order(datos_spy$date), ]
spy_reducido <- tail(datos_spy, 365)
# 3. GENERAR GRÁFICOS
# -------------------------------------------------------------------
par(mfrow=c(3,1), mar=c(4,4,3,2))
# Gráfico 1
plot(spy_reducido$date, spy_reducido$close, type = "l", col = "blue",
main = "1. Serie por Muestreo: Precio SPY (Cierre)", xlab = "", ylab = "Precio ($)")
grid()
# Gráfico 1
plot(spy_reducido$date, spy_reducido$close, type = "l", col = "blue",
main = "1. Serie por Muestreo: Precio SPY (Cierre)", xlab = "", ylab = "Precio ($)")
grid()
# Gráfico 2
barplot(lluvia_mm, names.arg = meses, col = "forestgreen",
main = "2. Serie por Agregación: Lluvias Mensuales", ylab = "mm")
box(); grid(nx=NA, ny=NULL)
# Gráfico 3
rango_y <- range(c(spy_reducido$close, spy_reducido$open))
plot(spy_reducido$date, spy_reducido$close, type = "l", col = "blue", ylim = rango_y,
main = "3. Serie Múltiple: Apertura vs Cierre", xlab = "Fecha", ylab = "Valor ($)")
lines(spy_reducido$date, spy_reducido$open, col = "orange", lty = 2)
legend("topleft", legend=c("Cierre", "Apertura"), col=c("blue", "orange"), lty=c(1,2), bg="white")
grid()
par(mfrow=c(1,1))
if (!require("readxl")) install.packages("readxl")
if (!require("tidyr")) install.packages("tidyr")
library(readxl)
library(tidyr)
# A) Datos de Lluvia (Manuales - Agregación)
meses <- c("Ene", "Feb", "Mar", "Abr", "May", "Jun",
"Jul", "Ago", "Sep", "Oct", "Nov", "Dic")
lluvia_mm <- c(52.8, 3.9, 83.1, 49.2, 25.2, 29.9,
70.6, 45.2, 48.5, 94.2, 70.1, 74.4)
# B) Datos SPY (Muestreo)
if (file.exists("SPY.xlsx")) {
datos_spy <- read_excel("SPY.xlsx")
} else {
message("Selecciona tu archivo SPY.xlsx:")
datos_spy <- read_excel(file.choose())
}
if (ncol(datos_spy) == 1) {
message("Separando columnas por comas...")
datos_spy <- separate(datos_spy, col = 1, sep = ",",
into = c("date", "open", "high", "low", "close", "volume"))
datos_spy$close <- as.numeric(datos_spy$close)
datos_spy$open  <- as.numeric(datos_spy$open)
}
# Normalizar nombres y fechas
colnames(datos_spy) <- tolower(colnames(datos_spy))
datos_spy$date <- as.Date(datos_spy$date, format = "%m/%d/%Y")
if (all(is.na(datos_spy$date))) {
datos_spy_raw <- read_excel("SPY.xlsx")
try(datos_spy$date <- as.Date(datos_spy$date), silent=TRUE)
}
datos_spy <- na.omit(datos_spy)
datos_spy <- datos_spy[order(datos_spy$date), ]
spy_reducido <- tail(datos_spy, 365)
dev.new() # Opcional: abre nueva ventana si prefieres, si no, usa el panel Plots
plot(spy_reducido$date, spy_reducido$close,
type = "l", col = "blue", lwd = 2,
main = "1. Serie por Muestreo: Precio SPY (Cierre Diario)",
xlab = "Fecha", ylab = "Precio ($)")
grid()
barplot(lluvia_mm, names.arg = meses, col = "forestgreen",
main = "2. Serie por Agregación: Lluvias Mensuales (Londres)",
ylab = "Lluvia Acumulada (mm)")
box()
grid(nx=NA, ny=NULL)
rango_y <- range(c(spy_reducido$close, spy_reducido$open))
plot(spy_reducido$date, spy_reducido$close,
type = "l", col = "blue", lwd = 2, ylim = rango_y,
main = "3. Serie Múltiple: Apertura vs Cierre",
xlab = "Fecha", ylab = "Valor ($)")
# Añadimos la segunda línea
lines(spy_reducido$date, spy_reducido$open, col = "orange", lty = 2, lwd = 2)
legend("topleft", legend=c("Cierre", "Apertura"),
col=c("blue", "orange"), lty=c(1,2), lwd=2, bg="white")
grid()
